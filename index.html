<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Noise Studio — Project</title>
  <style>
    /* Polished embedded styles — responsive, accessible, no external assets */
    :root{
      --bg-1:#071422; --bg-2:#071722; --card:rgba(255,255,255,0.04);
      --accent:#7dd3fc; --accent-2:#0ea5a4; --text:#e6eef8; --muted:#98a3b3;
      --glass-blur:8px; --radius:14px; --max-w:980px;
    }

    /* Base layout */
    html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:var(--text);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    .wrap{max-width:var(--max-w);margin:6vh auto;padding:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));backdrop-filter: blur(var(--glass-blur));border-radius:var(--radius);box-shadow:0 10px 40px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.02)}

    /* Header */
    h1{margin:0 0 6px;font-size:1.8rem;letter-spacing:0.2px}
    p.lead{margin:0;color:var(--muted);font-size:0.98rem}

    /* Controls */
    #readme-controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin:16px 0}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:9px 14px;background:linear-gradient(180deg,var(--accent),#38bdf8);border-radius:10px;color:#002b33;font-weight:700;border:0;cursor:pointer;text-decoration:none}
    .btn:focus{outline:3px solid rgba(125,211,252,0.18);outline-offset:3px}
    .btn.secondary{background:transparent;color:var(--accent);border:1px solid rgba(125,211,252,0.12)}

    /* Updated timestamp */
    #updated{font-size:0.88rem;color:var(--muted);margin-left:auto}

    /* README content styling */
    #readme-content{margin-top:12px;background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.008));padding:22px;border-radius:10px;color:var(--text);line-height:1.6}
    #readme-content h1,#readme-content h2,#readme-content h3{color:var(--text);margin-top:1rem}
    #readme-content h1{font-size:1.4rem}
    #readme-content h2{font-size:1.2rem}
    #readme-content h3{font-size:1.05rem}
    #readme-content p{color:var(--muted);margin:0.6rem 0}

    /* Code and pre blocks */
    #readme-content pre{background:#021019;color:#bfeaf6;padding:14px;border-radius:8px;overflow:auto;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02)}
    #readme-content code{background:#021019;padding:3px 6px;border-radius:6px;color:#bfeaf6}

    /* Blockquote */
    #readme-content blockquote{border-left:3px solid rgba(125,211,252,0.12);padding:8px 12px;color:var(--muted);background:rgba(13,24,30,0.2);border-radius:6px}

    /* Lists and tables */
    #readme-content ul, #readme-content ol{margin:0.6rem 0 0.6rem 1.1rem}
    #readme-content table{width:100%;border-collapse:collapse;margin:0.8rem 0;overflow:auto}
    #readme-content th, #readme-content td{border:1px solid rgba(255,255,255,0.03);padding:8px;text-align:left}
    #readme-content th{background:rgba(255,255,255,0.02)}

    /* Images */
    #readme-content img{max-width:100%;height:auto;border-radius:8px;display:block;margin:10px 0}

    /* Small helpers */
    .meta{margin-top:18px;font-size:0.9rem;color:var(--muted)}

    /* Responsive */
    @media (max-width:640px){
      .wrap{margin:3vh 16px;padding:18px}
      .btn{padding:10px 12px;font-size:0.95rem}
      #updated{display:block;width:100%;margin-top:6px}
    }

    /* Accessibility: focus visible */
    :focus{outline:none}
    :focus-visible{outline:3px solid rgba(125,211,252,0.18);outline-offset:3px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Noise Studio</h1>
    <p>Procedural image & audio noise generator.</p>

    <div id="readme-controls">
      <a class="btn" href="https://github.com/blobbyofficial/noise-studio/releases/latest">Download (Latest release)</a>
      <button id="refreshBtn" class="btn">Refresh README</button>
      <span id="updated" class="meta" aria-live="polite"></span>
    </div>

    <div id="readme-content" aria-live="polite">Loading README…</div>

    <p class="meta"><strong>Note:</strong> The page fetches and renders the project <code>README.md</code> from GitHub so the content updates when the README changes.</p>
  </div>

  <script>
    (function(){
      const README_URL = 'https://raw.githubusercontent.com/BlobbyOfficial/Noise-Studio/refs/heads/master/README.md';
      const RAW_BASE = README_URL.replace(/README\.md$/, '');

      function escapeHtml(s){
        return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
      }

      function mdToHtml(md){
        // Escape then simple conversions
        let s = escapeHtml(md);

        // Code blocks ``` ```
        s = s.replace(/```([\s\S]*?)```/g, function(m, code){ return '<pre><code>'+escapeHtml(code)+'</code></pre>'; });

        // Inline code `code`
        s = s.replace(/`([^`]+)`/g, function(m,c){ return '<code>'+escapeHtml(c)+'</code>'; });

        // Images ![alt](url)
        s = s.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, function(m,alt,src){
          const resolved = src.match(/^https?:/i) ? src : (RAW_BASE + src.replace(/^\.\//,'').replace(/^\//,''));
          return '<img alt="'+escapeHtml(alt)+'" src="'+resolved+'" style="max-width:100%;height:auto;border-radius:6px;" />';
        });

        // Links [text](url)
        s = s.replace(/\[([^\]]+)\]\(([^)]+)\)/g, function(m,t,u){
          return '<a href="'+u+'" target="_blank" rel="noopener">'+t+'</a>';
        });

        // Headings
        s = s.replace(/^######\s*(.*)$/gm, '<h6>$1</h6>');
        s = s.replace(/^#####\s*(.*)$/gm, '<h5>$1</h5>');
        s = s.replace(/^####\s*(.*)$/gm, '<h4>$1</h4>');
        s = s.replace(/^###\s*(.*)$/gm, '<h3>$1</h3>');
        s = s.replace(/^##\s*(.*)$/gm, '<h2>$1</h2>');
        s = s.replace(/^#\s*(.*)$/gm, '<h1>$1</h1>');

        // Bold & italics
        s = s.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        s = s.replace(/\*(.*?)\*/g, '<em>$1</em>');

        // Unordered lists
        s = s.replace(/(^|\n)(?:[ \t]*[-*+]\s+.*(?:\n|$))+?/g, function(block){
          const items = block.trim().split(/\n/).map(function(line){ return '<li>'+line.replace(/^[ \t]*[-*+]\s+/, '')+'</li>'; }).join('');
          return '\n<ul>' + items + '</ul>\n';
        });

        // Paragraphs: split by two newlines
        s = s.split(/\n{2,}/).map(function(block){
          if (/^<h\d|^<ul|^<pre|^<img/.test(block.trim())) return block;
          return '<p>' + block.replace(/\n/g, ' ') + '</p>';
        }).join('\n');

        return s;
      }

      async function fetchAndRender(){
        const el = document.getElementById('readme-content');
        const updatedEl = document.getElementById('updated');
        try{
          const r = await fetch(README_URL, {cache: 'no-store'});
          if (!r.ok) throw new Error('Fetch failed: '+r.status);
          const txt = await r.text();
          el.innerHTML = mdToHtml(txt);
          const lm = r.headers.get('last-modified');
          updatedEl.textContent = lm ? 'Last updated: ' + new Date(lm).toLocaleString() : 'Fetched: ' + new Date().toLocaleString();
        }catch(err){
          el.innerHTML = '<p style="color:#fca5a5">Error loading README: '+escapeHtml(String(err))+'</p>';
          updatedEl.textContent = '';
        }
      }

      document.getElementById('refreshBtn').addEventListener('click', fetchAndRender);

      // D key shortcut to open releases
      document.addEventListener('keydown', function(e){ if ((e.key === 'd' || e.key === 'D') && !e.metaKey && !e.ctrlKey) { var link = document.querySelector('a[href*="releases/latest"]'); if (link) { window.location = link.href; } }});

      window.addEventListener('load', function(){ document.querySelector('.wrap a')?.focus(); fetchAndRender(); });
    })();
  </script>
</body>
</html>